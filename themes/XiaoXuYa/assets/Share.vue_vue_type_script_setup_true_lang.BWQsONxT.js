import{d as e,a,k as l,ay as t,p as s,y as o,an as u,q as r,f as i,z as n,b as d,B as p,A as c,x as v,aj as m,ap as f,e as y}from"./index.BWoVohGl.js";import{a as b}from"./album.DH3tnnhP.js";import{u as h}from"./composables.DRZoD034.js";import{a as x,k as _,l as w,h as k,y as g,z as C}from"./Layout.vue_vue_type_script_setup_true_lang.wctogJXG.js";const $=e({__name:"Delete",setup(e,{expose:s}){const o=b(),u=a({}),r=h(),{t:i}=l();return s({open:function(e,a=()=>{}){u.value=e;const l=r.warning({title:i("Delete Album"),content:i("Are you sure you want to delete this album?"),positiveText:i("Confirm"),negativeText:i("Cancel"),onPositiveClick:()=>(l.loading=!0,new Promise((e=>{t({path:{id:u.value.id}}).then((()=>{o.deleteAlbums([u.value.id]),a(),e(!0)})).finally((()=>{l.loading=!1}))})))})}}),(e,a)=>null}}),j={class:"flex flex-col space-y-4"},A={key:0,class:"flex justify-end"},D={key:1,class:"flex justify-between space-x-2"},S=e({__name:"Share",setup(e,{expose:t}){const b=a(!1),h=a({}),$=a(),S=a({type:"album",ids:[]}),T={},z=a(""),U=x(),{t:P}=l();function B(){f({body:S.value}).then((e=>{var a,l,t;if("error"===(null==(a=e.data)?void 0:a.status))return U.error(null==(l=e.data)?void 0:l.message);z.value=`${window.location.origin}/shares/${null==(t=e.data)?void 0:t.data.slug}`}))}return t({open:function(e){z.value="",h.value=e,S.value.ids=[h.value.id],b.value=!0}}),(e,a)=>(y(),s(o(u),{show:b.value,"onUpdate:show":a[4]||(a[4]=e=>b.value=e),title:e.$t("Share Album"),preset:"card",size:"small",bordered:!1,class:"max-w-screen-sm mx-4 md:mx-auto"},{action:r((()=>[z.value?(y(),d("div",D,[n(o(k),{class:"grow select-all","default-value":z.value,readonly:""},null,8,["default-value"]),n(o(p),{tertiary:"",type:"primary",class:"shrink-0",onClick:a[3]||(a[3]=()=>{o(C).copyText(z.value).then((()=>{o(U).success(o(P)("Copy successful"))})).catch((()=>{o(U).error(o(P)("Copy failed"))}))})},{icon:r((()=>[n(o(m),{icon:"fa-solid fa-copy"})])),_:1})])):(y(),d("div",A,[n(o(p),{tertiary:"",onClick:B},{default:r((()=>[c(v(e.$t("Create Share Link")),1)])),_:1})]))])),default:r((()=>[i("div",j,[n(o(_),{ref_key:"formRef",ref:$,model:S.value,rules:T,disabled:Boolean(z.value)},{default:r((()=>[n(o(w),{label:e.$t("Share Description"),path:"content"},{default:r((()=>[n(o(k),{resizable:"",type:"textarea",value:S.value.content,"onUpdate:value":a[0]||(a[0]=e=>S.value.content=e)},null,8,["value"])])),_:1},8,["label"]),n(o(w),{label:e.$t("Password"),path:"password"},{default:r((()=>[n(o(k),{type:"password",value:S.value.password,"onUpdate:value":a[1]||(a[1]=e=>S.value.password=e)},null,8,["value"])])),_:1},8,["label"]),n(o(w),{label:e.$t("Expiration Time"),path:"password"},{default:r((()=>[n(o(g),{"formatted-value":S.value.expired_at,"onUpdate:formattedValue":a[2]||(a[2]=e=>S.value.expired_at=e),type:"datetime",class:"w-full",placeholder:e.$t("Select Expiration Time"),"is-date-disabled":e=>e<Date.now(),"value-format":"yyyy-MM-dd HH:mm:ss",clearable:""},null,8,["formatted-value","placeholder","is-date-disabled"])])),_:1},8,["label"])])),_:1},8,["model","disabled"])])])),_:1},8,["show","title"]))}});export{$ as _,S as a};
