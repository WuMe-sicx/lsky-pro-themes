import{d as e,k as t,a as l,v as a,x as s,C as u,B as r,f as i,N as n,F as o,E as d,D as v,A as p,u as c,e as _,aU as f}from"./index.CT88Sm32.js";import{a as m,_ as h,M as g,k as b,l as y,h as k,m as x}from"./Layout.vue_vue_type_script_setup_true_lang.CVCKf7J5.js";import{_ as $}from"./Content.vue_vue_type_script_setup_true_lang.Dbg-RI-4.js";import{_ as w}from"./Back.vue_vue_type_script_setup_true_lang.DS8I_LA8.js";const C={class:"space-x-2"},P=e({__name:"CreateView",setup(e){const P=m(),j=c(),{t:L}=t(),T=l(!1),U=l({level:"low"}),q=l(null),D={title:{type:"string",required:!0,trigger:["blur","input"],message:L("Please enter the ticket title")},level:{type:"string",required:!0,trigger:["blur","input"],message:L("Please select the ticket level")},content:{type:"string",required:!0,trigger:["blur","input"],message:L("Please describe the issue you encountered")}},B=[{label:L("Low"),value:"low"},{label:L("Medium"),value:"medium"},{label:L("High"),value:"high"}],M=async e=>{var t;e.preventDefault(),null==(t=q.value)||t.validate((async e=>{var t,l,a;if(!e){T.value=!0;const e=await f({body:U.value}).finally((()=>T.value=!1));return"error"===(null==(t=e.data)?void 0:t.status)?P.error(null==(l=e.data)?void 0:l.message):(T.value=!1,j.push(`/user/tickets/${null==(a=e.data)?void 0:a.data.issue_no}`))}}))};return(e,t)=>(_(),a(h,{"header-title":e.$t("Create Ticket"),"toggle-header":!1,"show-footer":!1},{default:s((()=>[u($,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:s((()=>[u(r(g),{vertical:""},{default:s((()=>[i("div",C,[u(w,{to:"/user/tickets"})]),u(r(n),null,{default:s((()=>[u(r(b),{ref_key:"formRef",ref:q,"label-placement":"left","label-width":100,"label-align":"left",model:U.value,rules:D,onSubmit:o(M,["prevent"])},{default:s((()=>[u(r(y),{label:e.$t("Ticket Title"),path:"title"},{default:s((()=>[u(r(k),{value:U.value.title,"onUpdate:value":t[0]||(t[0]=e=>U.value.title=e),maxlength:20,placeholder:e.$t("Please enter the ticket title")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(y),{label:e.$t("Ticket Level"),path:"level"},{default:s((()=>[u(r(x),{options:B,value:U.value.level,"onUpdate:value":t[1]||(t[1]=e=>U.value.level=e),placeholder:e.$t("Please select the ticket level")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(y),{label:e.$t("Issue Description"),path:"content"},{default:s((()=>[u(r(k),{type:"textarea",maxlength:2e3,value:U.value.content,"onUpdate:value":t[2]||(t[2]=e=>U.value.content=e),placeholder:e.$t("Please enter the issue description")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(y),{class:"flex justify-end"},{default:s((()=>[u(r(d),{"attr-type":"submit",type:"primary",loading:T.value},{default:s((()=>[v(p(e.$t("Confirm Creation")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])),_:1},8,["header-title"]))}});export{P as default};
