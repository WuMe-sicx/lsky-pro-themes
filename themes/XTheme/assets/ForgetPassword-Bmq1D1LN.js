import{d as e,u as a,i as s,a as t,s as o,v as l,h as r,T as n,b as u,z as d,e as i,A as p,y as c,C as m,g as v,O as w,j as f,f as y,V as _,W as h}from"./index-Ctnlk-aF.js";import{_ as g}from"./AuthFormCard.vue_vue_type_script_setup_true_lang-Cu_hDfQ0.js";import{_ as b,a as k}from"./PhoneVerifyInput.vue_vue_type_script_setup_true_lang-e--7F6GK.js";import{a as x,L as $,g as z,h as P,i as C,j,f as U}from"./Layout-B7WTefT3.js";const R={key:"form"},L={class:"flex justify-between items-center mt-10 pt-6 border-t border-zinc-200 dark:border-zinc-800"},q={key:"success",class:"text-center py-8"},A={class:"text-xl font-semibold text-zinc-900 dark:text-zinc-50"},F={class:"text-sm text-zinc-500 dark:text-zinc-400 mt-2"},B=e({__name:"ForgetPassword",setup(e){const B=a(),{t:E}=s(),N=f(),S=x(),V=t(null),G=t({email:"",phone:"",password:"",password_confirmation:"",code:"",country_code:"cn"}),H=t("email"),I=t(!1),M=async()=>{var e,a;let s;if(s="email"===H.value?await _({body:G.value}):await h({body:G.value}),"error"===(null==(e=s.data)?void 0:e.status))return S.error(null==(a=s.data)?void 0:a.message);I.value=!0};return(e,a)=>(y(),o($,{"header-title":e.$t("Forgot Password")},{default:l((()=>[r(g,{title:e.$t("Reset Password"),subtitle:e.$t("Enter your email and verification code to reset your password")},{default:l((()=>[r(n,{name:"auth-fade",mode:"out-in"},{default:l((()=>[I.value?(y(),u("div",q,[a[11]||(a[11]=v("div",{class:"success-icon-wrapper mx-auto mb-6"},[v("svg",{class:"success-icon",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("circle",{cx:"24",cy:"24",r:"20",stroke:"#34C759","stroke-width":"2",fill:"none"}),v("path",{d:"M14 24l7 7l13-13",stroke:"#34C759","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})])],-1)),v("h2",A,c(e.$t("Password Reset Successfully")),1),v("p",F,c(e.$t("Your password has been updated. Please log in with your new password.")),1),r(d(w),{type:"primary",size:"large",strong:"",block:"",class:"mt-8",onClick:a[10]||(a[10]=e=>d(N).push("/login"))},{default:l((()=>[p(c(e.$t("Go to Login")),1)])),_:1})])):(y(),u("div",R,[r(d(z),{value:H.value,"onUpdate:value":a[0]||(a[0]=e=>H.value=e),type:"line",class:"mb-8"},{default:l((()=>{var a,s;return[!1!==(null==(a=d(B).configs)?void 0:a.app.user_email_verify)?(y(),o(d(P),{key:0,name:"email"},{default:l((()=>[p(c(e.$t("Email")),1)])),_:1})):i("",!0),!1!==(null==(s=d(B).configs)?void 0:s.app.user_phone_verify)?(y(),o(d(P),{key:1,name:"phone"},{default:l((()=>[p(c(e.$t("Phone")),1)])),_:1})):i("",!0)]})),_:1},8,["value"]),r(d(C),{ref_key:"formRef",ref:V,model:G.value,"show-require-mark":!0,onSubmit:m(M,["prevent"])},{default:l((()=>["email"===H.value?(y(),o(b,{key:0,event:"forget_password",size:"large",email:G.value.email,"onUpdate:email":a[1]||(a[1]=e=>G.value.email=e),code:G.value.code,"onUpdate:code":a[2]||(a[2]=e=>G.value.code=e)},null,8,["email","code"])):i("",!0),"phone"===H.value?(y(),o(k,{key:1,event:"forget_password",size:"large",phone:G.value.phone,"onUpdate:phone":a[3]||(a[3]=e=>G.value.phone=e),"country-code":G.value.country_code,"onUpdate:countryCode":a[4]||(a[4]=e=>G.value.country_code=e),code:G.value.code,"onUpdate:code":a[5]||(a[5]=e=>G.value.code=e)},null,8,["phone","country-code","code"])):i("",!0),r(d(j),{label:e.$t("New Password")},{default:l((()=>[r(d(U),{value:G.value.password,"onUpdate:value":a[6]||(a[6]=e=>G.value.password=e),placeholder:e.$t("Please enter a new password"),type:"password","show-password-on":"mousedown",size:"large","input-props":{required:!0}},null,8,["value","placeholder"])])),_:1},8,["label"]),r(d(j),{label:e.$t("Confirm New Password"),"show-feedback":!1},{default:l((()=>[r(d(U),{value:G.value.password_confirmation,"onUpdate:value":a[7]||(a[7]=e=>G.value.password_confirmation=e),placeholder:e.$t("Please confirm your new password"),type:"password","show-password-on":"mousedown",size:"large","input-props":{required:!0}},null,8,["value","placeholder"])])),_:1},8,["label"]),r(d(j),{class:"mt-8"},{default:l((()=>[r(d(w),{type:"primary","attr-type":"submit",size:"large",strong:"",block:""},{default:l((()=>[p(c(e.$t("Confirm Password Reset")),1)])),_:1})])),_:1}),v("div",L,[v("button",{type:"button",class:"auth-swiss-link text-sm",onClick:a[8]||(a[8]=e=>d(N).push("/"))},c(e.$t("Back to Home")),1),v("button",{type:"button",class:"auth-swiss-link text-sm",onClick:a[9]||(a[9]=e=>d(N).push("/login"))},c(e.$t("Return to Login")),1)])])),_:1},8,["model"])]))])),_:1})])),_:1},8,["title","subtitle"])])),_:1},8,["header-title"]))}});export{B as default};
