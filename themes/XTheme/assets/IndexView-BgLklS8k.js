import{a4 as e,d as t,i as s,m as a,a as r,an as l,O as i,ao as o,s as n,v as d,h as c,g as u,z as p,E as f,y as v,A as h,b as m,e as x,B as y,ap as g,f as b,_ as k}from"./index-Ctnlk-aF.js";import{_ as w}from"./Content.vue_vue_type_script_setup_true_lang-CATP0AmL.js";import{f as _,a as z,B as C,n as $,m as j,D as L,s as T,L as D}from"./Layout-B7WTefT3.js";import{_ as S}from"./DataTable.vue_vue_type_script_setup_true_lang-BVAbYJmv.js";import{u as A}from"./composables-DhvgzyQS.js";import"./Checkbox-oCtQDiYY.js";import"./Ellipsis-8oa2BOhe.js";const P={password:function(t,s={}){return e(_,{type:"password",showPasswordOn:"click",defaultValue:t,...s})}},W={class:"share-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-5",style:{"--i":"0"}},E={class:"flex items-center gap-4"},K={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-violet-100/50 dark:bg-violet-900/30"},M={class:"text-xl font-semibold text-zinc-900 dark:text-zinc-100"},V={class:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5"},B={class:"share-section grid grid-cols-2 gap-4",style:{"--i":"1"}},U={class:"rounded-xl border border-zinc-200 dark:border-zinc-800 p-4"},q={class:"flex items-center gap-3"},I={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-violet-100/50 dark:bg-violet-900/30"},N={class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums"},O={class:"text-xs text-zinc-500 dark:text-zinc-400"},R={class:"rounded-xl border border-zinc-200 dark:border-zinc-800 p-4"},F={class:"flex items-center gap-3"},G={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100/50 dark:bg-blue-900/30"},H={class:"text-xs text-zinc-500 dark:text-zinc-400"},J={class:"share-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-5",style:{"--i":"2"}},Q={class:"flex flex-col gap-4"},X={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},Y=["disabled"],Z={key:0,class:"text-xs tabular-nums"},ee={class:"grow md:grow-0 md:w-72"},te=k(t({__name:"IndexView",setup(t){const k=z(),te=A(),{t:se}=s(),ae=a(),re=r(),le=[{type:"selection"},{title:se("Type"),key:"type",width:100,align:"center",render:t=>e(C,null,{default:()=>"photo"===t.type?se("Photo"):se("Album")})},{title:se("Password"),key:"password",minWidth:180,render:e=>e.password?P.password(e.password,{size:"small",onChange(t){l({path:{id:e.id},body:{password:t}}).then((()=>{k.success(se("Successfully updated"))})).catch((()=>{k.error(se("Modification failed"))}))}}):se("None")},{title:se("Views"),key:"view_count",minWidth:100,align:"center",sorter:!0,render:e=>$.format(e.view_count)},{title:se("Expiration Time"),minWidth:200,key:"expired_at",sorter:!0,align:"center",render:e=>e.expired_at?j(e.expired_at).format("LLL"):se("None")},{title:se("Creation Time"),minWidth:200,key:"created_at",sorter:!0,align:"center",render:e=>j(e.created_at).format("LLL")},{title:se("Actions"),key:"actions",minWidth:170,fixed:"right",align:"center",render:t=>e(L,{vertical:!1,size:5,justify:"center"},{default:()=>[e(i,{size:"small",onClick:()=>{T.copyText(`${window.location.origin}/shares/${t.slug}`).then((()=>{k.success(se("Copy successful"))})).catch((()=>{k.error(se("Copy failed"))}))}},{default:()=>se("Copy Link")}),e(i,{size:"small",type:"error",onClick:()=>{ue([t.id],{title:se("Delete Share"),content:se("Are you sure you want to delete this share?")})}},{default:()=>se("Delete")})]})}],ie=r(""),oe=r("sort:latest"),ne=r([]),de=e=>g({query:{page:e,per_page:40,q:`${ie.value} ${oe.value}`.trim()}});function ce(e){var t;e.order?oe.value=`sort:${e.columnKey}:${e.order}`:oe.value="sort:latest",null==(t=re.value)||t.refresh()}function ue(e,t){const s=te.warning({positiveText:se("Confirm"),negativeText:se("Cancel"),onPositiveClick:()=>(s.loading=!0,new Promise((t=>{o({body:e}).then((()=>{var e;k.success(se("Deleted successfully")),ne.value=[],null==(e=re.value)||e.refresh(),t(!0)})).finally((()=>{s.loading=!1}))}))),...t})}function pe(){var e;null==(e=re.value)||e.refresh()}return(e,t)=>(b(),n(D,{"header-title":e.$t("My Shares"),"toggle-header":!1,"show-footer":!1},{default:d((()=>[c(w,{class:"p-4 md:p-6 lg:p-8 space-y-6"},{default:d((()=>{var s;return[u("div",W,[u("div",E,[u("div",K,[c(p(f),{icon:["fas","share-nodes"],class:"w-4 h-4 text-violet-600 dark:text-violet-400"})]),u("div",null,[u("h1",M,v(e.$t("My Shares")),1),u("p",V,v(e.$t("Manage and track your shared links")),1)])])]),u("div",B,[u("div",U,[u("div",q,[u("div",I,[c(p(f),{icon:["fas","link"],class:"w-3.5 h-3.5 text-violet-600 dark:text-violet-400"})]),u("div",null,[u("p",N,v(p($).format((null==(s=p(ae).profile)?void 0:s.share_count)||0)),1),u("p",O,v(e.$t("Total Shares")),1)])])]),u("div",R,[u("div",F,[u("div",G,[c(p(f),{icon:["far","eye"],class:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})]),u("div",null,[t[3]||(t[3]=u("p",{class:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums"},"--",-1)),u("p",H,v(e.$t("Total Views")),1)])])])]),u("div",J,[u("div",Q,[u("div",X,[u("div",null,[u("button",{class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-40 disabled:cursor-not-allowed cursor-pointer",disabled:ne.value.length<=0,onClick:t[0]||(t[0]=e=>ue(ne.value.map((e=>e)),{title:p(se)("Delete Share"),content:p(se)("Are you sure you want to delete the selected {count} shares?",{count:ne.value.length})}))},[c(p(f),{icon:["far","trash-can"],class:"w-3.5 h-3.5"}),h(" "+v(e.$t("Delete"))+" ",1),ne.value.length>0?(b(),m("span",Z,"("+v(ne.value.length)+")",1)):x("",!0)],8,Y)]),u("div",ee,[c(p(_),{value:ie.value,"onUpdate:value":t[1]||(t[1]=e=>ie.value=e),placeholder:e.$t("Enter keywords to search..."),onKeyup:y(pe,["enter","native"])},{prefix:d((()=>[c(p(f),{icon:["fas","magnifying-glass"],class:"w-3.5 h-3.5 text-zinc-400"})])),_:1},8,["value","placeholder"])])]),c(S,{striped:"",ref_key:"tableRef",ref:re,bordered:!1,fetch:de,columns:le,"row-key":e=>e.id,"checked-row-keys":ne.value,"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>ne.value=e),onUpdateSorter:ce},null,8,["row-key","checked-row-keys"])])])]})),_:1})])),_:1},8,["header-title"]))}}),[["__scopeId","data-v-9436eb9a"]]);export{te as default};
