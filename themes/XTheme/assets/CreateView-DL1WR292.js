import{d as e,i as l,a as t,s as a,v as s,h as u,z as r,g as i,P as n,C as o,O as d,A as v,y as p,j as c,f,aC as m}from"./index-Ctnlk-aF.js";import{a as _,L as h,D as g,i as b,j as y,f as k,k as $}from"./Layout-B7WTefT3.js";import{_ as w}from"./Content.vue_vue_type_script_setup_true_lang-CATP0AmL.js";import{_ as x}from"./Back.vue_vue_type_script_setup_true_lang-sCWvZjrO.js";const j={class:"space-x-2"},C=e({__name:"CreateView",setup(e){const C=_(),P=c(),{t:L}=l(),T=t(!1),q=t({level:"low"}),D=t(null),U={title:{type:"string",required:!0,trigger:["blur","input"],message:L("Please enter the ticket title")},level:{type:"string",required:!0,trigger:["blur","input"],message:L("Please select the ticket level")},content:{type:"string",required:!0,trigger:["blur","input"],message:L("Please describe the issue you encountered")}},z=[{label:L("Low"),value:"low"},{label:L("Medium"),value:"medium"},{label:L("High"),value:"high"}],A=async e=>{var l;e.preventDefault(),null==(l=D.value)||l.validate((async e=>{var l,t,a;if(!e){T.value=!0;const e=await m({body:q.value}).finally((()=>T.value=!1));return"error"===(null==(l=e.data)?void 0:l.status)?C.error(null==(t=e.data)?void 0:t.message):(T.value=!1,P.push(`/user/tickets/${null==(a=e.data)?void 0:a.data.issue_no}`))}}))};return(e,l)=>(f(),a(h,{"header-title":e.$t("Create Ticket"),"toggle-header":!1,"show-footer":!1},{default:s((()=>[u(w,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:s((()=>[u(r(g),{vertical:""},{default:s((()=>[i("div",j,[u(x,{to:"/user/tickets"})]),u(r(n),null,{default:s((()=>[u(r(b),{ref_key:"formRef",ref:D,"label-placement":"left","label-width":100,"label-align":"left",model:q.value,rules:U,onSubmit:o(A,["prevent"])},{default:s((()=>[u(r(y),{label:e.$t("Ticket Title"),path:"title"},{default:s((()=>[u(r(k),{value:q.value.title,"onUpdate:value":l[0]||(l[0]=e=>q.value.title=e),maxlength:20,placeholder:e.$t("Please enter the ticket title")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(y),{label:e.$t("Ticket Level"),path:"level"},{default:s((()=>[u(r($),{options:z,value:q.value.level,"onUpdate:value":l[1]||(l[1]=e=>q.value.level=e),placeholder:e.$t("Please select the ticket level")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(y),{label:e.$t("Issue Description"),path:"content"},{default:s((()=>[u(r(k),{type:"textarea",maxlength:2e3,value:q.value.content,"onUpdate:value":l[2]||(l[2]=e=>q.value.content=e),placeholder:e.$t("Please enter the issue description")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(y),{class:"flex justify-end"},{default:s((()=>[u(r(d),{"attr-type":"submit",type:"primary",loading:T.value},{default:s((()=>[v(p(e.$t("Confirm Creation")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])),_:1},8,["header-title"]))}});export{C as default};
