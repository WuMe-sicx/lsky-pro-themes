import{_ as e}from"./Content.vue_vue_type_script_setup_true_lang-CATP0AmL.js";import{r as s,m as a,c as l,a as t,o as r,L as i,n as c,k as o,f as n}from"./Layout-B7WTefT3.js";import{E as u,D as d,a as m}from"./album-CfclpCjE.js";import{l as b}from"./lodash-CdNXJ-G9.js";import{d as p,b as g,f,g as v,j as h,i as y,z as x,h as k,E as w,v as _,O as z,C as j,e as $,y as A,a4 as C,a as L,F as S,s as q,x as O,m as D,J as E,o as M,A as N,ab as F,_ as I}from"./index-Ctnlk-aF.js";import{_ as B,a as H}from"./Share.vue_vue_type_script_setup_true_lang-pQNI3fgW.js";import{N as R}from"./Spin-DlOkiMFH.js";import"./composables-DhvgzyQS.js";const U={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},J=[v("path",{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 0 0 0-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120s-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3c0 66.2 53.8 120 120 120s120-53.8 120-120s-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52s-52-23.3-52-52s23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88s88 39.5 88 88s-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52s52 23.3 52 52s-23.3 52-52 52z",fill:"currentColor"},null,-1)],P=p({name:"ShareAltOutlined",render:function(e,s){return f(),g("svg",U,J)}}),T=["src"],V={key:1,class:"flex items-center justify-center w-full h-full bg-gray-200 dark:bg-gray-700"},G={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/70 to-transparent p-3"},K={key:0,class:"text-white font-medium truncate text-sm mb-1"},Q={class:"flex justify-between items-center text-white/80 text-xs"},W=p({__name:"Album",props:{album:{type:Object,required:!0},handleSelect:{type:Function,default:()=>{}}},setup(e){const t=e,r=h(),{t:i}=y();function c(e){return()=>C(l,null,{default:()=>C(e)})}const o=[{key:"edit",label:i("Edit Album"),icon:c(u)},{key:"share",label:i("Share"),icon:c(P)},{key:"delete",label:i("Delete"),icon:c(d)}];return(e,l)=>(f(),g("div",{class:"relative aspect-square cursor-pointer group overflow-hidden bg-gray-200 dark:bg-gray-800",onClick:l[0]||(l[0]=()=>{x(r).push(`/user/albums/${t.album.id}`)})},[t.album.covers&&t.album.covers.length>0?(f(),g("img",{key:0,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",alt:"album cover",src:t.album.covers[0]},null,8,T)):(f(),g("div",V,[k(x(w),{icon:"fa-solid fa-images",class:"text-gray-400 dark:text-gray-500",size:"3x"})])),l[1]||(l[1]=v("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300"},null,-1)),k(x(s),{size:"large",placement:"bottom-start",trigger:"click",options:o,onSelect:t.handleSelect,"show-arrow":""},{default:_((()=>[k(x(z),{tertiary:"",circle:"",size:"small",type:"default",title:e.$t("Show Album Options"),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black bg-opacity-50 text-white border-none hover:bg-opacity-70",onClick:j((()=>{}),["stop"])},{icon:_((()=>[k(x(w),{icon:"fa-solid fa-ellipsis-vertical",class:"text-white"})])),_:1},8,["title"])])),_:1},8,["onSelect"]),v("div",G,[t.album.name?(f(),g("p",K,A(t.album.name),1)):$("",!0),v("div",Q,[v("span",null,A(e.$t("{count} items",{count:t.album.photo_count})),1),v("span",null,A(x(a)(t.album.created_at).format("L")),1)])])]))}}),X={key:1,class:"w-full grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-1 p-1"},Y={key:2,class:"flex justify-center py-10"},Z=p({__name:"AlbumList",setup(e){const s=m(),a=t(),l=h(),{t:i}=y(),c=L(),o=L();return(e,t)=>(f(),g(S,null,[k(B,{ref_key:"deleteRef",ref:c},null,512),k(H,{ref_key:"shareRef",ref:o},null,512),x(s).isLoading||0!==x(s).albums.length?(f(),g("div",X,[(f(!0),g(S,null,O(x(s).albums,(e=>(f(),q(W,{album:e,key:e.id,"handle-select":s=>function(e,s){var t,r;switch(e){case"edit":l.push(`/user/albums/${s.id}`);break;case"share":null==(t=o.value)||t.open(s);break;case"delete":null==(r=c.value)||r.open(s,(()=>{a.success(i("Deleted successfully"))}))}}(s,e)},null,8,["album","handle-select"])))),128))])):(f(),q(x(r),{key:0,class:"my-10",description:e.$t("No albums available")},null,8,["description"])),x(s).isLoading?(f(),g("div",Y,[k(x(R),{size:25})])):$("",!0)],64))}}),ee={key:0,class:"space-y-6 animate-pulse"},se={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},ae={class:"album-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-5",style:{"--i":"0"}},le={class:"flex items-center justify-between"},te={class:"flex items-center gap-4"},re={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-100/50 dark:bg-emerald-900/30"},ie={class:"text-xl font-semibold text-zinc-900 dark:text-zinc-100"},ce={class:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5"},oe={class:"album-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-4",style:{"--i":"1"}},ne={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},ue={class:"flex items-center gap-2"},de={class:"grow sm:grow-0 sm:w-72"},me={class:"album-section",style:{"--i":"2"}},be=I(p({__name:"IndexView",setup(s){const a=t(),l=h(),r=m(),u=D(),{t:d}=y(),p=L(!0),j=e=>{const s=e.target;100+s.scrollTop+s.clientHeight>=s.scrollHeight&&(r.isLoading||(r.setPage(r.page+1),r.fetchAlbums()))},$=[{label:d("Newest"),value:"latest"},{label:d("Oldest"),value:"oldest"}],C=L({q:"",order_by:"latest"});function I(){r.resetAlbums({q:`sort:${C.value.order_by} ${C.value.q}`})}E(C,b.debounce((()=>I()),500),{deep:!0});const B=()=>{F({body:{name:d("Create New Album")}}).then((e=>{var s;l.push(`/user/albums/${null==(s=e.data)?void 0:s.data.id}`).then((()=>{a.success(d("Created successfully"))}))}))};return M((()=>{I();const e=E((()=>r.isLoading),(s=>{!s&&p.value&&(p.value=!1,e())}))})),(s,a)=>(f(),q(i,{"toggle-header":!1,"show-footer":!1,"header-title":s.$t("Album Management"),"content-class":"bg-white dark:bg-[var(--n-color)]","on-scroll":j},{default:_((()=>[k(e,{class:"p-4 md:p-6 lg:p-8 space-y-6"},{default:_((()=>{var e;return[p.value?(f(),g("div",ee,[a[2]||(a[2]=v("div",{class:"flex items-center gap-4"},[v("div",{class:"w-10 h-10 rounded-lg bg-zinc-200 dark:bg-zinc-800"}),v("div",{class:"space-y-2"},[v("div",{class:"h-5 w-48 bg-zinc-200 dark:bg-zinc-800 rounded"}),v("div",{class:"h-3 w-32 bg-zinc-200 dark:bg-zinc-800 rounded"})])],-1)),a[3]||(a[3]=v("div",{class:"h-14 bg-zinc-200 dark:bg-zinc-800 rounded-xl"},null,-1)),v("div",se,[(f(),g(S,null,O(10,(e=>v("div",{key:e,class:"aspect-square bg-zinc-200 dark:bg-zinc-800 rounded-xl"}))),64))])])):(f(),g(S,{key:1},[v("div",ae,[v("div",le,[v("div",te,[v("div",re,[k(x(w),{icon:["far","folder"],class:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})]),v("div",null,[v("h1",ie,A(s.$t("Album Management")),1),v("p",ce,A(s.$t("{count} albums",{count:x(c).format((null==(e=x(u).profile)?void 0:e.album_count)||0)})),1)])]),k(x(z),{type:"primary",onClick:B},{icon:_((()=>[k(x(w),{icon:["fas","plus"],class:"w-3.5 h-3.5"})])),default:_((()=>[N(" "+A(s.$t("Create Album")),1)])),_:1})])]),v("div",oe,[v("div",ne,[v("div",ue,[k(x(o),{class:"w-32",placeholder:s.$t("Sort"),options:$,value:C.value.order_by,"onUpdate:value":a[0]||(a[0]=e=>C.value.order_by=e)},null,8,["placeholder","value"])]),v("div",de,[k(x(n),{value:C.value.q,"onUpdate:value":a[1]||(a[1]=e=>C.value.q=e),placeholder:s.$t("Enter keywords to search..."),clearable:""},{prefix:_((()=>[k(x(w),{icon:["fas","magnifying-glass"],class:"w-3.5 h-3.5 text-zinc-400"})])),_:1},8,["value","placeholder"])])])]),v("div",me,[k(Z)])],64))]})),_:1})])),_:1},8,["header-title"]))}}),[["__scopeId","data-v-afbfb0b0"]]);export{be as default};
