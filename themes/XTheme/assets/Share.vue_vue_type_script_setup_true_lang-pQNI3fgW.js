import{d as e,a,i as l,ak as s,s as t,z as o,a7 as u,v as i,g as r,h as d,b as n,O as c,A as p,y as v,E as f,a9 as m,f as y}from"./index-Ctnlk-aF.js";import{a as b}from"./album-CfclpCjE.js";import{u as h}from"./composables-DhvgzyQS.js";import{a as x,i as w,j as _,f as g,q as k,s as C}from"./Layout-B7WTefT3.js";const $=e({__name:"Delete",setup(e,{expose:t}){const o=b(),u=a({}),i=h(),{t:r}=l();return t({open:function(e,a=()=>{}){u.value=e;const l=i.warning({title:r("Delete Album"),content:r("Are you sure you want to delete this album?"),positiveText:r("Confirm"),negativeText:r("Cancel"),onPositiveClick:()=>(l.loading=!0,new Promise((e=>{s({path:{id:u.value.id}}).then((()=>{o.deleteAlbums([u.value.id]),a(),e(!0)})).finally((()=>{l.loading=!1}))})))})}}),(e,a)=>null}}),j={class:"flex flex-col space-y-4"},A={key:0,class:"flex justify-end"},S={key:1,class:"flex justify-between space-x-2"},T=e({__name:"Share",setup(e,{expose:s}){const b=a(!1),h=a({}),$=a(),T=a({type:"album",ids:[]}),D={},U=a(""),z=x(),{t:E}=l();function P(){m({body:T.value}).then((e=>{var a,l,s;if("error"===(null==(a=e.data)?void 0:a.status))return z.error(null==(l=e.data)?void 0:l.message);U.value=`${window.location.origin}/shares/${null==(s=e.data)?void 0:s.data.slug}`}))}return s({open:function(e){U.value="",h.value=e,T.value.ids=[h.value.id],b.value=!0}}),(e,a)=>(y(),t(o(u),{show:b.value,"onUpdate:show":a[4]||(a[4]=e=>b.value=e),title:e.$t("Share Album"),preset:"card",size:"small",bordered:!1,class:"max-w-screen-sm mx-4 md:mx-auto"},{action:i((()=>[U.value?(y(),n("div",S,[d(o(g),{class:"grow select-all","default-value":U.value,readonly:""},null,8,["default-value"]),d(o(c),{tertiary:"",type:"primary",class:"shrink-0",onClick:a[3]||(a[3]=()=>{o(C).copyText(U.value).then((()=>{o(z).success(o(E)("Copy successful"))})).catch((()=>{o(z).error(o(E)("Copy failed"))}))})},{icon:i((()=>[d(o(f),{icon:"fa-solid fa-copy"})])),_:1})])):(y(),n("div",A,[d(o(c),{tertiary:"",onClick:P},{default:i((()=>[p(v(e.$t("Create Share Link")),1)])),_:1})]))])),default:i((()=>[r("div",j,[d(o(w),{ref_key:"formRef",ref:$,model:T.value,rules:D,disabled:Boolean(U.value)},{default:i((()=>[d(o(_),{label:e.$t("Share Description"),path:"content"},{default:i((()=>[d(o(g),{resizable:"",type:"textarea",value:T.value.content,"onUpdate:value":a[0]||(a[0]=e=>T.value.content=e)},null,8,["value"])])),_:1},8,["label"]),d(o(_),{label:e.$t("Password"),path:"password"},{default:i((()=>[d(o(g),{type:"password",value:T.value.password,"onUpdate:value":a[1]||(a[1]=e=>T.value.password=e)},null,8,["value"])])),_:1},8,["label"]),d(o(_),{label:e.$t("Expiration Time"),path:"password"},{default:i((()=>[d(o(k),{"formatted-value":T.value.expired_at,"onUpdate:formattedValue":a[2]||(a[2]=e=>T.value.expired_at=e),type:"datetime",class:"w-full",placeholder:e.$t("Select Expiration Time"),"is-date-disabled":e=>e<Date.now(),"value-format":"yyyy-MM-dd HH:mm:ss",clearable:""},null,8,["formatted-value","placeholder","is-date-disabled"])])),_:1},8,["label"])])),_:1},8,["model","disabled"])])])),_:1},8,["show","title"]))}});export{$ as _,T as a};
