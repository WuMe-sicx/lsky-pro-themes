import{_ as e}from"./Content.vue_vue_type_script_setup_true_lang-CATP0AmL.js";import{a as t,L as a,k as s,y as l}from"./Layout-B7WTefT3.js";import{d as i,k as n,m as o,aq as r,u as c,i as d,a as u,c as p,bK as m,J as x,q as v,s as g,v as f,h,g as z,b,z as _,E as w,y,A as k,f as $,_ as j}from"./index-Ctnlk-aF.js";import{l as S}from"./lodash-CdNXJ-G9.js";const U={class:"settings-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-5",style:{"--i":"0"}},L={class:"flex items-center justify-between"},q={class:"flex items-center gap-4"},C={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-zinc-100 dark:bg-zinc-800"},A={class:"text-xl font-semibold text-zinc-900 dark:text-zinc-100"},I={class:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5"},D={key:0,class:"flex items-center gap-2 text-xs text-zinc-400 dark:text-zinc-500"},E={key:1,class:"flex items-center gap-2 text-xs text-zinc-400 dark:text-zinc-500"},N={class:"settings-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-5",style:{"--i":"1"}},O={class:"flex items-center gap-2 text-sm font-medium text-zinc-500 dark:text-zinc-400 mb-4"},R={class:"space-y-1"},F={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 py-3 px-3 -mx-3 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},G={class:"min-w-0"},J={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100"},K={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5"},P={class:"settings-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-5",style:{"--i":"2"}},T={class:"flex items-center gap-2 text-sm font-medium text-zinc-500 dark:text-zinc-400 mb-4"},V={class:"space-y-1"},W={class:"flex items-center justify-between py-3 px-3 -mx-3 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},B={class:"mr-4"},H={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100"},M={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5"},Q={class:"flex items-center justify-between py-3 px-3 -mx-3 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},X={class:"mr-4"},Y={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100"},Z={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5"},ee={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 py-3 px-3 -mx-3 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},te={class:"min-w-0"},ae={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100"},se={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5"},le={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 py-3 px-3 -mx-3 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},ie={class:"min-w-0"},ne={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100"},oe={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5"},re={class:"settings-section rounded-xl border border-zinc-200 dark:border-zinc-800 p-5",style:{"--i":"3"}},ce={class:"flex items-center gap-2 text-sm font-medium text-zinc-500 dark:text-zinc-400 mb-4"},de={class:"space-y-1"},ue={class:"flex items-center justify-between py-3 px-3 -mx-3 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},pe={class:"mr-4"},me={class:"text-sm font-medium text-zinc-900 dark:text-zinc-100"},xe={class:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5"},ve=j(i({__name:"IndexView",setup(i){var j;const ve=n(),ge=o(),fe=r(),he=c(),ze=t(),{t:be}=d(),_e=u(!1),we=u({language:"zh-CN",show_original_photos:!1,encode_copied_url:!1,auto_upload_after_select:!1,upload_button_action:"select_files",default_storage_id:null,...(null==(j=ge.profile)?void 0:j.options)||{}}),ye=fe.getLocales(),ke=p((()=>{var e;const t=(null==(e=he.group)?void 0:e.storages)||[];return[{label:be("None (follow global settings)"),value:null},...t.map((e=>({label:e.name,value:e.id})))]})),$e=p((()=>{var e;if(!we.value.default_storage_id)return!0;return((null==(e=he.group)?void 0:e.storages)||[]).some((e=>e.id===we.value.default_storage_id))})),je=S.debounce((async()=>{_e.value=!0;try{await m({body:we.value}),ge.setOptions(we.value),ze.success(be("Settings saved"))}catch{ze.error(be("Failed to save settings"))}finally{_e.value=!1}}),500);return x(we,(()=>{je()}),{deep:!0}),x((()=>we.value.language),(e=>{fe.setLocale(e),ve.refresh()})),x((()=>{var e;return null==(e=he.group)?void 0:e.storages}),(()=>{$e.value||(we.value.default_storage_id=null)}),{deep:!0}),v((()=>{je.cancel()})),(t,i)=>($(),g(a,{"header-title":t.$t("Settings"),"toggle-header":!1,"show-footer":!1},{default:f((()=>[h(e,{class:"p-4 md:p-6 lg:p-8 space-y-6"},{default:f((()=>[z("div",U,[z("div",L,[z("div",q,[z("div",C,[h(_(w),{icon:["fas","gear"],class:"w-4 h-4 text-zinc-600 dark:text-zinc-400"})]),z("div",null,[z("h1",A,y(t.$t("Settings")),1),z("p",I,y(t.$t("Customize your experience")),1)])]),_e.value?($(),b("div",D,[i[6]||(i[6]=z("span",{class:"h-1.5 w-1.5 rounded-full bg-amber-400 animate-pulse"},null,-1)),k(" "+y(t.$t("Saving...")),1)])):($(),b("div",E,[i[7]||(i[7]=z("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-400"},null,-1)),k(" "+y(t.$t("All changes saved")),1)]))])]),z("div",N,[z("h2",O,[h(_(w),{icon:["fas","globe"],class:"w-4 h-4"}),k(" "+y(t.$t("General")),1)]),z("div",R,[z("div",F,[z("div",G,[z("p",J,y(t.$t("System Language")),1),z("p",K,y(t.$t("Choose your language preference")),1)]),h(_(s),{class:"sm:min-w-48 sm:max-w-60",value:we.value.language,"onUpdate:value":i[0]||(i[0]=e=>we.value.language=e),options:_(ye)},null,8,["value","options"])])])]),z("div",P,[z("h2",T,[h(_(w),{icon:["fas","cloud-arrow-up"],class:"w-4 h-4"}),k(" "+y(t.$t("Image & Upload")),1)]),z("div",V,[z("div",W,[z("div",B,[z("p",H,y(t.$t("Show original photos")),1),z("p",M,y(t.$t("Priority is given to the original file rather than thumbnails when viewing images. This may cause the photos to appear slower.")),1)]),h(_(l),{value:we.value.show_original_photos,"onUpdate:value":i[1]||(i[1]=e=>we.value.show_original_photos=e)},null,8,["value"])]),z("div",Q,[z("div",X,[z("p",Y,y(t.$t("Auto upload after selecting images")),1),z("p",Z,y(t.$t("Automatically start uploading all images immediately after selection.")),1)]),h(_(l),{value:we.value.auto_upload_after_select,"onUpdate:value":i[2]||(i[2]=e=>we.value.auto_upload_after_select=e)},null,8,["value"])]),z("div",ee,[z("div",te,[z("p",ae,y(t.$t("Upload button behavior")),1),z("p",se,y(t.$t("Choose what happens when you click the upload button in the header. Select files to open file selector, or open queue to show upload queue.")),1)]),h(_(s),{class:"sm:min-w-48 sm:max-w-60",value:we.value.upload_button_action,"onUpdate:value":i[3]||(i[3]=e=>we.value.upload_button_action=e),options:[{label:t.$t("Select files"),value:"select_files"},{label:t.$t("Open upload queue"),value:"open_queue"}]},null,8,["value","options"])]),z("div",le,[z("div",ie,[z("p",ne,y(t.$t("Default Storage")),1),z("p",oe,y(t.$t("Choose the default storage location for uploading images. If not set, it will follow the global settings.")),1)]),h(_(s),{class:"sm:min-w-48 sm:max-w-60",value:we.value.default_storage_id,"onUpdate:value":i[4]||(i[4]=e=>we.value.default_storage_id=e),options:ke.value,filterable:"",clearable:""},null,8,["value","options"])])])]),z("div",re,[z("h2",ce,[h(_(w),{icon:["fas","link"],class:"w-4 h-4"}),k(" "+y(t.$t("Link & Share")),1)]),z("div",de,[z("div",ue,[z("div",pe,[z("p",me,y(t.$t("Encode URL when copying")),1),z("p",xe,y(t.$t("When copying an image URL, automatically encode special characters to ensure compatibility across different platforms.")),1)]),h(_(l),{value:we.value.encode_copied_url,"onUpdate:value":i[5]||(i[5]=e=>we.value.encode_copied_url=e)},null,8,["value"])])])])])),_:1})])),_:1},8,["header-title"]))}}),[["__scopeId","data-v-34408cdd"]]);export{ve as default};
