import{_ as e}from"./Content.vue_vue_type_script_setup_true_lang-CGEjm_tA.js";import{y as a,r as l,N as s,a as t,s as r,_ as o,g as u,l as c}from"./Layout.vue_vue_type_script_setup_true_lang-BRRcuvRl.js";import{E as i,a as n,l as d}from"./album-DkuRp1Yw.js";import{d as p,b,e as m,f as g,j as f,m as v,z as y,h,ak as _,v as w,B as k,Q as x,g as j,y as $,$ as A,a as C,s as z,F as S,x as L,I as q,o as N,A as O,ap as D}from"./index-DKzf3TMO.js";import{D as E}from"./DeleteOutlined-Daecp8an.js";import{_ as H,a as M}from"./Share.vue_vue_type_script_setup_true_lang-4tYwhG2g.js";import{N as B}from"./Spin-DZKmp4ei.js";import"./composables-B9wCYdts.js";const F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},I=[g("path",{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 0 0 0-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120s-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3c0 66.2 53.8 120 120 120s120-53.8 120-120s-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52s-52-23.3-52-52s23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88s88 39.5 88 88s-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52s52 23.3 52 52s-23.3 52-52 52z",fill:"currentColor"},null,-1)],R=p({name:"ShareAltOutlined",render:function(e,a){return m(),b("svg",F,I)}}),U=["src"],J={key:1,class:"flex items-center justify-center w-full h-full bg-gray-200 dark:bg-gray-700"},P={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/70 to-transparent p-3"},Q={key:0,class:"text-white font-medium truncate text-sm mb-1"},T={class:"flex justify-between items-center text-white/80 text-xs"},V=p({__name:"Album",props:{album:{type:Object,required:!0},handleSelect:{type:Function,default:()=>{}}},setup(e){const t=e,r=f(),{t:o}=v();function u(e){return()=>A(s,null,{default:()=>A(e)})}const c=[{key:"edit",label:o("Edit Album"),icon:u(i)},{key:"share",label:o("Share"),icon:u(R)},{key:"delete",label:o("Delete"),icon:u(E)}];return(e,s)=>(m(),b("div",{class:"relative aspect-square cursor-pointer group overflow-hidden bg-gray-200 dark:bg-gray-800",onClick:s[0]||(s[0]=()=>{y(r).push(`/user/albums/${t.album.id}`)})},[t.album.covers&&t.album.covers.length>0?(m(),b("img",{key:0,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",alt:"album cover",src:t.album.covers[0]},null,8,U)):(m(),b("div",J,[h(y(_),{icon:"fa-solid fa-images",class:"text-gray-400 dark:text-gray-500",size:"3x"})])),s[1]||(s[1]=g("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300"},null,-1)),h(y(a),{size:"large",placement:"bottom-start",trigger:"click",options:c,onSelect:t.handleSelect,"show-arrow":""},{default:w(()=>[h(y(k),{tertiary:"",circle:"",size:"small",type:"default",title:e.$t("Show Album Options"),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black bg-opacity-50 text-white border-none hover:bg-opacity-70",onClick:x(()=>{},["stop"])},{icon:w(()=>[h(y(_),{icon:"fa-solid fa-ellipsis-vertical",class:"text-white"})]),_:1},8,["title"])]),_:1},8,["onSelect"]),g("div",P,[t.album.name?(m(),b("p",Q,$(t.album.name),1)):j("",!0),g("div",T,[g("span",null,$(e.$t("{count} items",{count:t.album.photo_count})),1),g("span",null,$(y(l)(t.album.created_at).format("L")),1)])])]))}}),G={key:1,class:"w-full grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-1 p-1"},K={key:2,class:"flex justify-center py-10"},W=p({__name:"AlbumList",setup(e){const a=n(),l=t(),s=f(),{t:o}=v(),u=C(),c=C();return(e,t)=>(m(),b(S,null,[h(H,{ref_key:"deleteRef",ref:u},null,512),h(M,{ref_key:"shareRef",ref:c},null,512),y(a).isLoading||0!==y(a).albums.length?(m(),b("div",G,[(m(!0),b(S,null,L(y(a).albums,e=>(m(),z(V,{album:e,key:e.id,"handle-select":a=>function(e,a){var t,r;switch(e){case"edit":s.push(`/user/albums/${a.id}`);break;case"share":null==(t=c.value)||t.open(a);break;case"delete":null==(r=u.value)||r.open(a,()=>{l.success(o("Deleted successfully"))})}}(a,e)},null,8,["album","handle-select"]))),128))])):(m(),z(y(r),{key:0,class:"my-10",description:e.$t("No albums available")},null,8,["description"])),y(a).isLoading?(m(),b("div",K,[h(y(B),{size:25})])):j("",!0)],64))}}),X={class:"flex items-center justify-between space-x-2 sticky top-0 z-[4] bg-gray-50 border-b border-transparent dark:bg-[var(--n-color)] dark:border-b-gray-800 p-2 w-full"},Y={class:"space-x-2"},Z={class:"shrink-0 grow md:grow-0 w-1/2 flex space-x-2"},ee=p({__name:"IndexView",setup(a){const l=t(),s=f(),r=n(),{t:i}=v(),p=e=>{const a=e.target;100+a.scrollTop+a.clientHeight>=a.scrollHeight&&(r.isLoading||(r.setPage(r.page+1),r.fetchAlbums()))},b=[{label:i("Newest"),value:"latest"},{label:i("Oldest"),value:"oldest"}],x=C({q:"",order_by:"latest"});function j(){r.resetAlbums({q:`sort:${x.value.order_by} ${x.value.q}`})}q(x,d.debounce(()=>j(),500),{deep:!0});const A=()=>{D({body:{name:i("Create New Album")}}).then(e=>{var a;s.push(`/user/albums/${null==(a=e.data)?void 0:a.data.id}`).then(()=>{l.success(i("Created successfully"))})})};return N(()=>j()),(a,l)=>(m(),z(o,{"toggle-header":!1,"show-footer":!1,"header-title":a.$t("Album Management"),"content-class":"bg-white dark:bg-[var(--n-color)]","on-scroll":p},{default:w(()=>[h(e,{class:"max-w-full"},{default:w(()=>[g("div",X,[g("div",Y,[h(y(k),{tertiary:"",type:"default",onClick:A},{icon:w(()=>[h(y(_),{icon:"fa-solid fa-plus"})]),default:w(()=>[O(" "+$(a.$t("Create Album")),1)]),_:1})]),g("div",Z,[h(y(u),{class:"grow",value:x.value.q,"onUpdate:value":l[0]||(l[0]=e=>x.value.q=e),placeholder:a.$t("Enter keywords to search..."),clearable:""},null,8,["value","placeholder"]),h(y(c),{class:"w-32",placeholder:a.$t("Sort"),options:b,value:x.value.order_by,"onUpdate:value":l[1]||(l[1]=e=>x.value.order_by=e)},null,8,["placeholder","value"])])]),h(W)]),_:1})]),_:1},8,["header-title"]))}});export{ee as default};
