import{V as e,W as t,X as a,Y as s,Z as r,d as l,$ as o,a0 as n,a1 as u,a2 as i,a3 as d,a4 as p,a5 as c,a6 as f,a7 as m,a8 as v,c as g,a9 as h,aa as y,a as w,u as _,m as $,s as b,v as R,h as P,z as C,A as x,y as j,Q as I,g as k,f as z,B as N,j as S,e as A,ab as U,ac as O}from"./index-DKzf3TMO.js";import{_ as V}from"./AuthFormCard.vue_vue_type_script_setup_true_lang-DN8OKypR.js";import{_ as F,a as q}from"./PhoneVerifyInput.vue_vue_type_script_setup_true_lang-CM3UQTm_.js";import{o as G,k as W,p as B,q as E,a as L,_ as M,h as H,i as Q,j as X,g as Y}from"./Layout.vue_vue_type_script_setup_true_lang-BRRcuvRl.js";const Z=s(24,null).map((e,t)=>{const a=t+1,s=`calc(100% / 24 * ${a})`;return[r(`${a}-span`,{width:s}),r(`${a}-offset`,{marginLeft:s}),r(`${a}-push`,{left:s}),r(`${a}-pull`,{right:s})]}),D=e([t("row",{width:"100%",display:"flex",flexWrap:"wrap"}),t("col",{verticalAlign:"top",boxSizing:"border-box",display:"inline-block",position:"relative",zIndex:"auto"},[a("box",{position:"relative",zIndex:"auto",width:"100%",height:"100%"}),Z])]),J=m("n-row"),K={gutter:{type:[Array,Number,String],default:0},alignItems:String,justifyContent:String},T=f(K),ee=l({name:"Row",props:K,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:a}=n(e);u("-legacy-grid",D,t);const s=i("Row",a,t),r=d(()=>{const{gutter:t}=e;return Array.isArray(t)&&t[1]||0}),l=d(()=>{const{gutter:t}=e;return Array.isArray(t)?t[0]:Number(t)});return p(J,{mergedClsPrefixRef:t,gutterRef:c(e,"gutter"),verticalGutterRef:r,horizontalGutterRef:l}),{mergedClsPrefix:t,rtlEnabled:s,styleMargin:d(()=>`-${G(r.value,{c:.5})} -${G(l.value,{c:.5})}`),styleWidth:d(()=>`calc(100% + ${G(l.value)})`)}},render(){return o("div",{class:[`${this.mergedClsPrefix}-row`,this.rtlEnabled&&`${this.mergedClsPrefix}-row--rtl`],style:{margin:this.styleMargin,width:this.styleWidth,alignItems:this.alignItems,justifyContent:this.justifyContent}},this.$slots)}}),te={span:{type:[String,Number],default:1},push:{type:[String,Number],default:0},pull:{type:[String,Number],default:0},offset:{type:[String,Number],default:0}},ae=f(te),se=l({name:"Col",props:te,setup(e){const t=h(J,null);return t||v("col","`n-col` must be placed inside `n-row`."),{mergedClsPrefix:t.mergedClsPrefixRef,gutter:t.gutterRef,stylePadding:g(()=>`${G(t.verticalGutterRef.value,{c:.5})} ${G(t.horizontalGutterRef.value,{c:.5})}`),mergedPush:g(()=>Number(e.push)-Number(e.pull))}},render(){const{$slots:e,span:t,mergedPush:a,offset:s,stylePadding:r,gutter:l,mergedClsPrefix:n}=this;return o("div",{class:[`${n}-col`,{[`${n}-col--${t}-span`]:!0,[`${n}-col--${a}-push`]:a>0,[`${n}-col--${-a}-pull`]:a<0,[`${n}-col--${s}-offset`]:s}],style:{padding:r}},l?o("div",null,e):e)}}),re=Object.assign(Object.assign({},te),E),le=f(re),oe=l({name:"FormItemCol",props:re,setup(){const e=w(null);return{formItemInstRef:e,validate:(...t)=>{const{value:a}=e;if(a)return a.validate(...t)},restoreValidation:()=>{const{value:t}=e;t&&t.restoreValidation()}}},render(){return o(se,y(this.$props,ae),{default:()=>{const e=y(this.$props,B);return o(W,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}}),ne=l({name:"FormItemRow",props:Object.assign(Object.assign({},K),re),setup(){const e=w(null);return{formItemColInstRef:e,validate:(...t)=>{const{value:a}=e;if(a)return a.validate(...t)},restoreValidation:()=>{const{value:t}=e;t&&t.restoreValidation()}}},render(){return o(ee,y(this.$props,T),{default:()=>{const e=y(this.$props,le);return o(oe,Object.assign(Object.assign({ref:"formItemColInstRef"},e),{span:24}),this.$slots)}})}}),ue={class:"flex justify-between"},ie=l({__name:"ForgetPassword",setup(e){_();const{t:t}=$(),a=S(),s=L(),r=w(null),l=w({email:"",phone:"",password:"",password_confirmation:"",code:"",country_code:"cn"}),o=w("email"),n=async()=>{var e,r;let n;if(n="email"===o.value?await U({body:l.value}):await O({body:l.value}),"error"===(null==(e=n.data)?void 0:e.status))return s.error(null==(r=n.data)?void 0:r.message);a.push("/login").then(()=>s.success(t("Password reset successfully")))};return(e,t)=>(A(),b(M,{"header-title":e.$t("Forgot Password")},{default:R(()=>[P(V,{title:e.$t("Recover Password")},{default:R(()=>[P(C(H),{value:o.value,"onUpdate:value":t[0]||(t[0]=e=>o.value=e),type:"segment",class:"mb-4"},{default:R(()=>[P(C(Q),{name:"email"},{default:R(()=>[x(j(e.$t("Recover via Email")),1)]),_:1}),P(C(Q),{name:"phone"},{default:R(()=>[x(j(e.$t("Recover via Mobile Number")),1)]),_:1})]),_:1},8,["value"]),P(C(X),{ref_key:"formRef",ref:r,model:l.value,"show-require-mark":!0,onSubmit:I(n,["prevent"])},{default:R(()=>["email"===o.value?(A(),b(F,{key:0,event:"forget_password",size:"large",email:l.value.email,"onUpdate:email":t[1]||(t[1]=e=>l.value.email=e),code:l.value.code,"onUpdate:code":t[2]||(t[2]=e=>l.value.code=e)},null,8,["email","code"])):k("",!0),"phone"===o.value?(A(),b(q,{key:1,event:"forget_password",size:"large",phone:l.value.phone,"onUpdate:phone":t[3]||(t[3]=e=>l.value.phone=e),"country-code":l.value.country_code,"onUpdate:countryCode":t[4]||(t[4]=e=>l.value.country_code=e),code:l.value.code,"onUpdate:code":t[5]||(t[5]=e=>l.value.code=e)},null,8,["phone","country-code","code"])):k("",!0),P(C(ne),{label:e.$t("New Password")},{default:R(()=>[P(C(Y),{value:l.value.password,"onUpdate:value":t[6]||(t[6]=e=>l.value.password=e),placeholder:e.$t("Please enter a new password"),type:"password","show-password-on":"mousedown",size:"large","input-props":{required:!0}},null,8,["value","placeholder"])]),_:1},8,["label"]),P(C(ne),{label:e.$t("Confirm New Password"),"show-feedback":!1},{default:R(()=>[P(C(Y),{value:l.value.password_confirmation,"onUpdate:value":t[7]||(t[7]=e=>l.value.password_confirmation=e),placeholder:e.$t("Please confirm your new password"),type:"password","show-password-on":"mousedown",size:"large","input-props":{required:!0}},null,8,["value","placeholder"])]),_:1},8,["label"]),P(C(ne),null,{default:R(()=>[P(C(N),{type:"primary","attr-type":"submit",size:"large",strong:"",block:""},{default:R(()=>[x(j(e.$t("Confirm Password Reset")),1)]),_:1})]),_:1}),z("div",ue,[P(C(N),{text:"",type:"info",onClick:t[8]||(t[8]=e=>C(a).push("/"))},{default:R(()=>[x(j(e.$t("Back to Home")),1)]),_:1}),P(C(N),{text:"",type:"info",onClick:t[9]||(t[9]=e=>C(a).push("/login"))},{default:R(()=>[x(j(e.$t("Return to Login")),1)]),_:1})])]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["header-title"]))}});export{ie as default};
