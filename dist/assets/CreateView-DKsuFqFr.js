import{d as e,m as t,a as l,s as a,v as s,h as u,z as r,f as i,N as n,Q as o,B as d,A as v,y as p,j as c,e as _,aU as f}from"./index-DKzf3TMO.js";import{a as m,_ as h,J as g,j as y,k as b,g as k,l as x}from"./Layout.vue_vue_type_script_setup_true_lang-BRRcuvRl.js";import{_ as $}from"./Content.vue_vue_type_script_setup_true_lang-CGEjm_tA.js";import{_ as j}from"./Back.vue_vue_type_script_setup_true_lang-i2ZA4QCP.js";const w={class:"space-x-2"},P=e({__name:"CreateView",setup(e){const P=m(),C=c(),{t:T}=t(),U=l(!1),q=l({level:"low"}),L=l(null),B={title:{type:"string",required:!0,trigger:["blur","input"],message:T("Please enter the ticket title")},level:{type:"string",required:!0,trigger:["blur","input"],message:T("Please select the ticket level")},content:{type:"string",required:!0,trigger:["blur","input"],message:T("Please describe the issue you encountered")}},D=[{label:T("Low"),value:"low"},{label:T("Medium"),value:"medium"},{label:T("High"),value:"high"}],z=async e=>{var t;e.preventDefault(),null==(t=L.value)||t.validate(async e=>{var t,l,a;if(!e){U.value=!0;const e=await f({body:q.value}).finally(()=>U.value=!1);return"error"===(null==(t=e.data)?void 0:t.status)?P.error(null==(l=e.data)?void 0:l.message):(U.value=!1,C.push(`/user/tickets/${null==(a=e.data)?void 0:a.data.issue_no}`))}})};return(e,t)=>(_(),a(h,{"header-title":e.$t("Create Ticket"),"toggle-header":!1,"show-footer":!1},{default:s(()=>[u($,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:s(()=>[u(r(g),{vertical:""},{default:s(()=>[i("div",w,[u(j,{to:"/user/tickets"})]),u(r(n),null,{default:s(()=>[u(r(y),{ref_key:"formRef",ref:L,"label-placement":"left","label-width":100,"label-align":"left",model:q.value,rules:B,onSubmit:o(z,["prevent"])},{default:s(()=>[u(r(b),{label:e.$t("Ticket Title"),path:"title"},{default:s(()=>[u(r(k),{value:q.value.title,"onUpdate:value":t[0]||(t[0]=e=>q.value.title=e),maxlength:20,placeholder:e.$t("Please enter the ticket title")},null,8,["value","placeholder"])]),_:1},8,["label"]),u(r(b),{label:e.$t("Ticket Level"),path:"level"},{default:s(()=>[u(r(x),{options:D,value:q.value.level,"onUpdate:value":t[1]||(t[1]=e=>q.value.level=e),placeholder:e.$t("Please select the ticket level")},null,8,["value","placeholder"])]),_:1},8,["label"]),u(r(b),{label:e.$t("Issue Description"),path:"content"},{default:s(()=>[u(r(k),{type:"textarea",maxlength:2e3,value:q.value.content,"onUpdate:value":t[2]||(t[2]=e=>q.value.content=e),placeholder:e.$t("Please enter the issue description")},null,8,["value","placeholder"])]),_:1},8,["label"]),u(r(b),{class:"flex justify-end"},{default:s(()=>[u(r(d),{"attr-type":"submit",type:"primary",loading:U.value},{default:s(()=>[v(p(e.$t("Confirm Creation")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})]),_:1},8,["header-title"]))}});export{P as default};
