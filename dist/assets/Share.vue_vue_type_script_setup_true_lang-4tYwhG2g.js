import{d as e,a,m as l,ax as t,s,z as o,am as u,v as r,f as i,h as d,b as n,B as p,A as c,y as v,ak as m,ao as f,e as y}from"./index-DKzf3TMO.js";import{a as b}from"./album-DkuRp1Yw.js";import{u as x}from"./composables-B9wCYdts.js";import{a as h,j as _,k as w,g,w as k,x as C}from"./Layout.vue_vue_type_script_setup_true_lang-BRRcuvRl.js";const $=e({__name:"Delete",setup(e,{expose:s}){const o=b(),u=a({}),r=x(),{t:i}=l();return s({open:function(e,a=()=>{}){u.value=e;const l=r.warning({title:i("Delete Album"),content:i("Are you sure you want to delete this album?"),positiveText:i("Confirm"),negativeText:i("Cancel"),onPositiveClick:()=>(l.loading=!0,new Promise(e=>{t({path:{id:u.value.id}}).then(()=>{o.deleteAlbums([u.value.id]),a(),e(!0)}).finally(()=>{l.loading=!1})}))})}}),(e,a)=>null}}),j={class:"flex flex-col space-y-4"},A={key:0,class:"flex justify-end"},S={key:1,class:"flex justify-between space-x-2"},T=e({__name:"Share",setup(e,{expose:t}){const b=a(!1),x=a({}),$=a(),T=a({type:"album",ids:[]}),D={},U=a(""),z=h(),{t:E}=l();function P(){f({body:T.value}).then(e=>{var a,l,t;if("error"===(null==(a=e.data)?void 0:a.status))return z.error(null==(l=e.data)?void 0:l.message);U.value=`${window.location.origin}/shares/${null==(t=e.data)?void 0:t.data.slug}`})}return t({open:function(e){U.value="",x.value=e,T.value.ids=[x.value.id],b.value=!0}}),(e,a)=>(y(),s(o(u),{show:b.value,"onUpdate:show":a[4]||(a[4]=e=>b.value=e),title:e.$t("Share Album"),preset:"card",size:"small",bordered:!1,class:"max-w-screen-sm mx-4 md:mx-auto"},{action:r(()=>[U.value?(y(),n("div",S,[d(o(g),{class:"grow select-all","default-value":U.value,readonly:""},null,8,["default-value"]),d(o(p),{tertiary:"",type:"primary",class:"shrink-0",onClick:a[3]||(a[3]=()=>{o(C).copyText(U.value).then(()=>{o(z).success(o(E)("Copy successful"))}).catch(()=>{o(z).error(o(E)("Copy failed"))})})},{icon:r(()=>[d(o(m),{icon:"fa-solid fa-copy"})]),_:1})])):(y(),n("div",A,[d(o(p),{tertiary:"",onClick:P},{default:r(()=>[c(v(e.$t("Create Share Link")),1)]),_:1})]))]),default:r(()=>[i("div",j,[d(o(_),{ref_key:"formRef",ref:$,model:T.value,rules:D,disabled:Boolean(U.value)},{default:r(()=>[d(o(w),{label:e.$t("Share Description"),path:"content"},{default:r(()=>[d(o(g),{resizable:"",type:"textarea",value:T.value.content,"onUpdate:value":a[0]||(a[0]=e=>T.value.content=e)},null,8,["value"])]),_:1},8,["label"]),d(o(w),{label:e.$t("Password"),path:"password"},{default:r(()=>[d(o(g),{type:"password",value:T.value.password,"onUpdate:value":a[1]||(a[1]=e=>T.value.password=e)},null,8,["value"])]),_:1},8,["label"]),d(o(w),{label:e.$t("Expiration Time"),path:"password"},{default:r(()=>[d(o(k),{"formatted-value":T.value.expired_at,"onUpdate:formattedValue":a[2]||(a[2]=e=>T.value.expired_at=e),type:"datetime",class:"w-full",placeholder:e.$t("Select Expiration Time"),"is-date-disabled":e=>e<Date.now(),"value-format":"yyyy-MM-dd HH:mm:ss",clearable:""},null,8,["formatted-value","placeholder","is-date-disabled"])]),_:1},8,["label"])]),_:1},8,["model","disabled"])])]),_:1},8,["show","title"]))}});export{$ as _,T as a};
